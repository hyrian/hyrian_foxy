<root main_tree_to_execute = "MainTree">
    <BehaviorTree ID="MainTree">
        <KeepRunningUntilFailure>
            <Sequence>
                <Action ID="KeywordTrigger" keyword1="{keyword1}" keyword2="{keyword2}"  />
                <ReactiveFallback>
                    <ReactiveSequence>
                        <Condition ID="KeywordCheck" value="Navigation" keyword="{keyword1}"  />
                        <SetBlackboard ID="SetLocationToBlackboard" output_key="keyword2" value="{keyword2}" />
                        <SubTree ID="MoveToProduct" keyword2="keyword2" />
                    </ReactiveSequence>
                    <ReactiveSequence>
                        <Condition ID="KeywordCheck" value="Gesture" keyword="{keyword1}"  />
                        <SetBlackboard ID="SetOptionToBlackboard" output_key="option" value="{keyword2}" />
                        <SubTree ID="Gesture_Select" keyword2 ="option"/>
                    </ReactiveSequence>
                </ReactiveFallback>
            </Sequence>
        </KeepRunningUntilFailure>
    </BehaviorTree>

    <BehaviorTree ID="MoveToProduct">
        <Fallback>
            <Sequence>
                <Condition ID="KeywordCheck" value="옷" keyword="{keyword2}"/>
                <SetBlackboard output_key="Goal" value="1.219;1.530;129.114;"  />
                <SetBlackboard output_key="GestureOption" value="Left" />
                <SubTree ID="MoveRobot" Goal="Goal" />
                <SubTree ID="Gesture_Select" option="GestureOption" />
            </Sequence>
            <Sequence>
                <Condition ID="KeywordCheck" value="신발" keyword="{keyword2}" />
                <SetBlackboard output_key="Goal" value="1.219;1.530;129.114;"  />
                <SetBlackboard output_key="GestureOption" value="Right" />
                <SubTree ID="MoveRobot" Goal="Goal" />
                <SubTree ID="Gesture_Select" option="GestureOption" />
            </Sequence>
            <Sequence>
                <Condition ID="KeywordCheck" value="책" keyword="{keyword2}"/>
                <SetBlackboard output_key="Goal" value="-0.170;2.665;44.692;" />
                <SetBlackboard output_key="GestureOption" value="Left" />
                <SubTree ID="MoveRobot" Goal="Goal" />
                <SubTree ID="Gesture_Select" option="GestureOption" />
            </Sequence>
            <Sequence>
                <Condition ID="KeywordCheck" value="전자기기" keyword="{keyword2}" />
                <SetBlackboard output_key="Goal" value="-0.170;2.665;44.692;"  />
                <SetBlackboard output_key="GestureOption" value="Right" />
                <SubTree ID="MoveRobot" Goal="Goal" />
                <SubTree ID="Gesture_Select" option="GestureOption" />
            </Sequence>
        </Fallback>
    </BehaviorTree>


    <BehaviorTree ID="Gesture_Select">
        <Sequence name="gesture_sequence">
            <Action ID="Gesture" option="{keyword2}" />
        </Sequence>
    </BehaviorTree>

    <BehaviorTree ID="MoveRobot">
        <Sequence name="SetGoal">
            <NavigateToPose Goal="{Goal}" />
        </Sequence>
    </BehaviorTree>
</root>
